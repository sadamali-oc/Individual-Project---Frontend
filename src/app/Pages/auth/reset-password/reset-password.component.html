<div class="reset-password-wrapper">
  <div class="reset-password-container">
    <div class="reset-password-card">

      <div class="reset-password-logo">
        <img
          id="logo"
          src="https://firebasestorage.googleapis.com/v0/b/imageuploaddb-d99cf.appspot.com/o/Copilot_20250802_005804%20(1).png?alt=media&token=37e6a53c-df51-4d7d-b350-084d357758b6"
          alt="Logo"
        />
      </div>

      <h1 class="reset-password-title">Reset Password</h1>

      <form class="reset-password-form" [formGroup]="resetForm" (ngSubmit)="onSubmit()">

        <!-- New Password -->
        <label for="newPassword" class="form-label">New Password</label>
        <div class="input-wrapper">
          <input
            [type]="showNewPassword ? 'text' : 'password'"
            id="newPassword"
            class="form-input"
            formControlName="newPassword"
            required
          />
          <button type="button" class="visibility-toggle" (click)="toggleNewPasswordVisibility()" aria-label="Toggle password visibility">
            <mat-icon>{{ showNewPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </div>
        <div class="form-error" *ngIf="resetForm.controls['newPassword'].touched && resetForm.controls['newPassword'].invalid">
          <span *ngIf="resetForm.controls['newPassword'].errors?.['required']">New Password is required.</span>
          <span *ngIf="resetForm.controls['newPassword'].errors?.['minlength']">Password must be at least 6 characters.</span>
          <!-- Add custom error messages here if you have pattern validators -->
        </div>

        <!-- Confirm Password -->
        <label for="confirmPassword" class="form-label">Confirm Password</label>
        <div class="input-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            class="form-input"
            formControlName="confirmPassword"
            required
          />
          <button type="button" class="visibility-toggle" (click)="toggleConfirmPasswordVisibility()" aria-label="Toggle password visibility">
            <mat-icon>{{ showConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </div>
        <div class="form-error" *ngIf="(resetForm.controls['confirmPassword'].touched || resetForm.controls['confirmPassword'].dirty) && resetForm.errors?.['mismatch']">
          Passwords do not match.
        </div>
        <div class="form-error" *ngIf="resetForm.controls['confirmPassword'].touched && resetForm.controls['confirmPassword'].errors?.['required']">
          Confirm Password is required.
        </div>

        <button
          type="submit"
          class="form-button"
          [disabled]="resetForm.invalid || isLoading"
        >
          {{ isLoading ? 'Resetting...' : 'Reset Password' }}
        </button>
      </form>

      <p class="back-to-login">
        Remember your password?
        <button type="button" (click)="gotoLogin()" class="back-button">
          Back to Login
        </button>
      </p>
    </div>
  </div>
</div>
